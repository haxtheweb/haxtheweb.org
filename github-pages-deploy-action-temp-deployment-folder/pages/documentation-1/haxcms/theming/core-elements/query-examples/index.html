<person-testimonial style="width: 75%; margin: 0px auto; display: block;" elevation="1" image="https://media1.giphy.com/media/3t7RAFhu75Wwg/giphy.gif" name="Dwight K Schrute" position="Assistant to the regional Web component developer manager" accent-color="grey">  <span>Hold up there. You didn't cover any of the query tags in that last section!</span>
</person-testimonial>
<p>Ok ok, here's the deal. Queries are so important that they needed their own section. Calm down Dwight we'll handle that now.<span style="caret-color: rgb(25, 30, 35);"> </span><span style="caret-color: rgb(0, 0, 0);">The <b><i>site-</i>

</b>

 query elements are incredibly powerful aspects of HAXcms theming that deserve their own section anyway.</span></p>
<h2><a href="https://github.com/elmsln/lrnwebcomponents/blob/master/elements/haxcms-elements/lib/ui-components/query/site-query.js">site-query</a>

</h2>
<h3>Code Example</h3>
<code-sample>  <template preserve-content="preserve-content">&lt; site-query
result="{{result}}"
conditions='{"metadata.tag": "funny"}'
&gt;
&lt; /site-query&gt;

<iron-list id="list" items="[[__items]]" grid="" mutable-data="">
  <slot></slot>
</iron-list></template>
</code-sample>
<h3 class="hax-active">Spoken Example</h3>
<p>"Give me all of the </p>
<person-testimonial elevation="1" image="https://media1.giphy.com/media/3o6wrgksPVF3SMrLHO/giphy.gif" name="sacha baron cohen" position="King of castles" accent-color="light-blue" style="width: 75%; margin: 0px auto; display: block;">  <span>Give me all of the pages who have a tag "Funny"</span>
</person-testimonial>
<h3 class="hax-active">When it's useful</h3>
<p>Always. This is by far the most powerful element in our library. It can query the site structure and effectively return anything, anywhere that matches the criteria. It is for exact criteria matching though so you won't be getting children of page X unless you specifically requested them.</p>
<p>This is great for getting things like getting all the pages that don't have parents (top level items) which is exactly how the <a href="https://github.com/elmsln/lrnwebcomponents/blob/master/elements/haxcms-elements/lib/ui-components/navigation/site-top-menu.js#L116">site-top-menu</a>

 tag does it in conjunction with a dom-repeat tag (in that example).</p>
<h3 class="hax-active">Caveats</h3>
<ul><li>This doesn't render anything by itself</li>


<li>You have to then know how to do a two way template bind (Polymer convention looking like <b>{{result}} </b>

or know how to use javascript in order to bind the results to visual output</li>

<li>Its incredibly powerful</li>

</ul>
<p><a href="https://github.com/elmsln/lrnwebcomponents/blob/master/elements/haxcms-elements/lib/ui-components/query/site-query-menu-slice.js">site-query-menu-slice</a>

<br/></p>
<p>A menu slice query is one which takes part of a hierarchy and chops it out to return the items.</p>
<code-sample copy-clipboard-button="copy-clipboard-button" style="width: 100%;">  <template preserve-content="preserve-content"> &lt;
    site-query-menu-slice
    result="{{__items}}"
    dynamic-methodology="[[dynamicMethodology]]"
    start="[[start]]"
    end="[[end]]"
    parent="[[parent]]"
    fixed-id="[[fixedId]]"
    &gt;
    &lt; /site-query-menu-slice&gt;
    <dom-repeat items="[[__items]]">
        <template>
        <div class="spacing">
            <a data-id$="[[item.id]]" class="link" tabindex="-1" href$="[[item.location]]">
            <paper-button noink="[[noink]]">
                <div class$="indent indent-[[item.indent]]"></div>
                [[item.title]]
            </paper-button>
            </a>
        </div>
        </template>
    </dom-repeat></template>
</code-sample>
<h3>Spoken example</h3>
<lrndesign-blockquote style="width: 100%;" citation="America's Funniest Home Videos" image="https://media1.giphy.com/media/26tP972jcNs3V4bKw/giphy.gif" author="Bunch of kids falling" display-mode="leather" resource="#a8847fad-d94f-7e9b-6dd5" prefix="oer:http://oerschema.org/ schema:http://schema.org/ dc:http://purl.org/dc/terms/ foaf:http://xmlns.com/foaf/0.1/ cc:http://creativecommons.org/ns# bib:http://bib.schema.org ">  <span>Give me all child pages<br/>
that are 2 to 4 levels deep.</span>
</lrndesign-blockquote>
<h3>Delivered results</h3>
<self-check title="Paying attention check" image="files/2019-03-23_10-51-10.jpg" alt="Another part of the same site illustrating that the theme block is generated by the type of query we're talking about." link="elements" accent-color="purple" resource="#d81c3a76-d1d3-2817-d2d8" prefix="oer:http://oerschema.org/ schema:http://schema.org/ dc:http://purl.org/dc/terms/ foaf:http://xmlns.com/foaf/0.1/ cc:http://creativecommons.org/ns# bib:http://bib.schema.org " style="width: 75%; margin: 0px auto; display: block;">  <span slot="question">What type of query is this leveraging again?</span>
  <span>site-query-menu-slice</span>
</self-check>
<h3 class="hax-active">Dynamic leveling</h3>
<p>The dynamic leveling flag would allow you to create a query that analyzes the current active item (as example). And then say "Always give me 2-3 levels below this". In that instance you've got a dynamic sub-set of children being returned.</p>
<h3>When it's useful</h3>
<p>This can be useful for a block that always shows the children of the current page in a documentation site.</p>
<h2><a href="https://github.com/elmsln/lrnwebcomponents/blob/master/elements/haxcms-elements/lib/ui-components/query/site-render-query.js">site-render-query</a>

</h2>
<p>A site render query attempts to standardize the practice of wiring site-query up to something visual. It requires you supply something visual to get going and has the unfortunate limitation though that what you render must not be dynamic in nature.</p>
<p>Example</p>
<code-sample copy-clipboard-button="copy-clipboard-button" style="width: 100%;">  <template preserve-content="preserve-content"><site-render-query class="cardlist" grid="">
        <template>
          <div style="padding:8px;">
            <paper-card heading="[[item.title]]" image="[[item.metadata.image]]" elevation="1" animated-shadow="false">
              <div class="card-content">
                <div>description: [[item.description]]</div>
                <div>location: [[item.location]]</div>
                <div>changed: [[item.metadata.updated]]</div>
              </div>
              <div class="card-actions">
                <a tabindex="-1" href$="[[item.location]]"><paper-button data-id$="[[item.id]]">Set as active</paper-button></a>
              </div>
            </paper-card>
          </div>
        </template>
      </site-render-query></template>
</code-sample>
<p><br/></p>
<magazine-cover header="Spoken query" text="Pull in everything in the site and then render each result based on what's in this template tag." image="https://media3.giphy.com/media/5xtDarAUbabd4JvWpaM/giphy.gif" action="Why is this falling heads?" icon="icons:thumb-up" link="https://www.youtube.com/watch?v=StTqXEQ2l-Y" style="width: 75%; margin: 0px auto; display: block;"></magazine-cover>
<h3 class="hax-active">When it's useful</h3>
<p>When you have a static set of items you want to query once and have it be dynamic based on site infrastructure yet not be changing dynamically during site view.</p>
<h3 class="hax-active">Possible usage</h3>
<p>As we haven't rolled this into any themes at the time, this could be useful for placing a "latest posts" block or "upcoming events" block. Anything that's dynamic based on the data being passed in but yet unchanging once it's loaded. Think of this as a simple "views" construct if you are from the Drupal worldview.</p>
